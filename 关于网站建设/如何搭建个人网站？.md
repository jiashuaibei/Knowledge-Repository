#  如何搭建个人网站？

## 本文我将详细介绍我们如何搭建个人网站。

### 这张思维导图展示了大致步骤，请参照思维导图阅读。

![如何让搭建个人网站](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/%E5%A6%82%E4%BD%95%E8%AE%A9%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99.png)

## 第零步 关于网站的实现原理解析（重点！！！）

### 大致原理
网站建立在服务器上，网站的内容也存储在服务器的硬盘里。安装在服务器上的一套组件可以支持网站的运行。
这套组件常见有两种：**LNMP**、**LAMP**。当浏览器访问一个网站时，网站收到请求就会从硬盘里调出并发送相应的页面给用户。
网站与用户之间的通信模式为HTTP或者HTTPS。

### 详细解释

**LNMP代表的就是：Linux系统下Nginx+MySQL+PHP这种网站服务器架构。**
**LANP代表的是Linux+Apache+MySQL+PHP**

在这之中：

**服务器**
服务器就是一台计算机，只是没有键盘、鼠标、显示器。

**L=Linux**
Linux是一类Unix计算机操作系统的统称，是目前最流行的免费操作系统。代表版本有：debian、centos、ubuntu、Arch、gentoo等。
绝大部分的服务器都是使用Linux操作系统
我使用的是Centos7.9

**N=Nginx** 、**A=Apache**
Nginx和Apache是高性能的HTTP和反向代理服务器。
Nginx同Apache一样都是一种WEB服务器，基于REST架构风格，以统一资源描述符(Uniform Resources Identifier)URI或者统一资源定位符(Uniform Resources Locator)URL作为沟通依据，通过HTTP协议提供各种网络服务。

**反向代理服务器**
反向代理的工作原理是，代理服务器来接受客户端的网络访问连接请求，然后服务器将请求有策略的转发给网络中实际工作的业务服务器，并将从业务服务器处理的结果，返回给网络上发起连接请求的客户端。
Nginx、Apache就是反向代理服务器软件。

**M=Mysql** 是一个小型关系型数据库管理系统。

**P=PHP**
**概念：** 
PHP（PHP: Hypertext Preprocessor）即“超文本预处理器”，是在服务器端执行的脚本语言，尤其适用于Web开发并可嵌入HTML中。

**工作原理：** 
当用户在浏览器地址中输入要访问的PHP页面文件名，点击Enter就会触发这个PHP请求，并将请求传送化支持PHP的WEB服务器（Nginx、Apache……）。

当WEB服务器接受这个请求之后会根据其后缀进行判断，如果是一个PHP请求，WEB服务器会从硬盘或内存中取出用户要访问的PHP应用程序，并将其发送给PHP引擎程序。

之后PHP引擎程序将会对WEB服务器传送过来的文件从头到尾进行扫描并根据命令从后台读取，处理数据，并动态地生成相应的HTML页面。

最后PHP引擎将生成HTML页面返回给WEB服务器。WEB服务器再将HTML页面返回给客户端浏览器，最后结果为：一个完整的页面通过浏览展现在我们眼前。


**HTTP**
HTTP（HyperText Transfer Protocol：超文本传输协议）是一种用于分布式、协作式和超媒体信息系统的应用层协议。 简单来说就是一种发布和接收 HTML 页面的方法，被用于在 Web 浏览器和网站服务器之间传递信息。

HTTP 默认工作在 TCP 协议 80 端口，用户访问网站 http:// 打头的都是标准 HTTP 服务。

HTTP 协议以明文方式发送内容，不提供任何方式的数据加密，如果攻击者截取了Web浏览器和网站服务器之间的传输报文，就可以直接读懂其中的信息，因此，HTTP协议不适合传输一些敏感信息，比如：信用卡号、密码等支付信息。

**HTTPS**
HTTPS（Hypertext Transfer Protocol Secure：超文本传输安全协议）是一种透过计算机网络进行安全通信的传输协议。HTTPS 经由 HTTP 进行通信，但利用 SSL/TLS 来加密数据包。HTTPS 开发的主要目的，是提供对网站服务器的身份认证，保护交换数据的隐私与完整性。

HTTPS 默认工作在 TCP 协议443端口，它的工作流程一般如以下方式：

1、TCP 三次同步握手
2、客户端验证服务器数字证书
3、DH 算法协商对称加密算法的密钥、hash 算法的密钥
4、SSL 安全加密隧道协商完成
5、网页以加密的方式传输，用协商的对称加密算法和密钥加密，保证数据机密性；用协商的hash算法进行数据完整性保护，保证数据不被篡改。

### 接下来我会具体展示以上步骤。
### 每一步中我会首先对此步骤操作进行详细解释，之后展示我的实际演示。


## 第一步 拥有一台服务器
首先我们需要拥有一台服务器来布置我们的网站，服务器讲就是一台没有鼠标、键盘、屏幕的电脑。

我们看到的网页就是从目标网站的服务器与我们的电脑把网页页面进行通信传输，从而在我们的电脑上行程可视化界面。

服务器有两种获取方式：**云服务器**、**物理服务器**。
#### 云服务器
云服务器是云计算提供商（比如阿里云、腾讯云、华为云）通过KVM等技术分配给你的计算机资源。

优点是：提供商帮你进行维护、可以24小时不间断运行、具有公网IP、不用配置烦人的网络。
缺点是：费用昂贵、对于大型公司数据安全得不到百分百保证。

#### 物理服务器
物理服务器是个人所拥有的真实的计算机，比如个人电脑、树莓派……

优点是：除了购买服务器的花费以及日常电费开销之外，没有其他费用。
缺点：没有公网IP、有故障的可能、需要自己进行网络配置。

#### 我的演示

我使用的阿里云的服务器作为演示（新用户、学生购买服务器认证之后首年特别便宜）
配置为：1核CPU、2GB内存、40GB硬盘、带宽为1Mbps
操作系统为：Centos7.9
**补充：** 服务器一般使用Linux操作系统，Linux发行版本有Debian、Centos、Ubuntu、OpenSUSE……在此我选择使用Centos7.9
![image-20220521130304772](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521130304772.png)


## 第二步 配置服务器防火墙
**由于服务器的防火墙会拦截我们的一些请求，因此我们要手动对这些端口进行放行，具体操作如下：**

登录服务器之后，来到阿里云服务器安全组的选项。点击配置规则，为服务器开放以下端口:

![image-20220521175412771](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521175412771.png)

对于这些端口的解释：

**8888**是宝塔界面的登陆端口（宝塔面板：用来简单化控制服务器的第三方软件）

**80和443**分别是 **HTTP和HTTPS**端口，用来浏览网页（HTTP和HTTPS是信息传输协议）

**22**是SSH连接服务器的端口（SSH：用来连接服务器的服务）

**3306**是MySQL的默认端口（MySQL：搭建网站需要用的数据库）


## 第三步 连接到服务器
首先找到服务器的**公网IP**
![image-20220521130329439](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521130329439.png)

之后用SSH工具通过服务器公网IP连接服务器
常见SSH工具有：xshell、windows powershell（windows11自带）、putty……
语法为： **ssh root@IP地址**

#### 我的演示
![image-20220521130356860](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521130356860.png)
首次连接时候先输入以下两个命令进行资源更新：

```
yum update
yu
```

![image-20220521130404119](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521130404119.png)
遇到（y/n)就输入 y 点击Enter


## 第四步 拥有公网IP
公网IP是全球范围内唯一的IP地址，可以实现在总的Internet上直接与公网IP进行通信。
#### 对于云服务器 
自带公网IP，可以直接使用。
#### 对于物理服务器
（1）向运营商索要（移动、联通、电信）
（2）进行内网穿透
#### 我的演示
由于我使用的阿里云服务器，因此直接获得了公网IP


## 第五步 拥有一个域名
**域名:** 是由一串用点分隔的名字组成的Internet上某一台计算机或计算机组的名称，用于在数据传输时对计算机的定位标识。

**注册域名之后就可以在浏览器搜索域名来到你的网站**

尽管IP地址能够唯一地标记网络上的计算机，但IP地址是一长串数字，不直观，而且用户记忆十分不方便，于是人们又发明了另一套字符型的地址方案，即所谓的**域名地址**。

**IP地址和域名是一一对应的，这份域名地址的信息存放在一个叫域名服务器(DNS，Domain name server)的主机内。** 使用者只需了解易记的域名地址，其对应转换工作就留给了域名服务器。**域名服务器就是提供IP地址和域名之间的转换服务的服务器。**

#### 注册域名
可以在阿里云的域名注册模块（`https://wanwang.aliyun.com/?spm=5176.19720258.J_3207526240.31.7a132c4apNt8JX`)注册自己喜欢的域名。价格根据后缀名的不同而不同。

![image-20220521130434185](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521130434185.png)

#### 我的演示

我注册了 jiashuaibei.xyz 的域名，为期一年，新用户注册很便宜。


## 第六步 域名备案
为了保证网络空间安全，每个域名都要进行备案，否则不能正常访问。

1.向 **阿里云（域名供应方）** 提交审核信息（大概两天）
2.之后向 **工信部** 提交信息，验证通过之后会短信提醒（大概10天） *在工信部审核期间，域名不能正常使用*
3.工信部通过之后域名可以正常使用了，但此时还需要向 **公安部** 提交审核
4.把工信部和公安部的 **备案号** 链接到你的网站主页下方 *如下图所示：* 

![image-20220521130445019](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521130445019.png)

## 第七步 将域名解析到公网IP

#### 什么是域名解析?
IP地址是一串数字，很不容易记忆。因此人类发明了可以自定义字符的域名，**而域名解析就是将域名转换为IP地址去访问输入的网址的这样一种行为。**

**域名解析就是需要我们手动把域名地址和IP地址的对应关系写到DNS服务器上，这样别人访问域名地址的时候就可以在DNS查询到对于的IP地址。**

#### 如何让能让域名地址和IP地址一一对应？
域名地址和IP地址的对应关系就放在DNS内，我们只需要记住域名地址，对应转换工作就留给了DNS。

#### 什么是DNS？

域名系统（英文：Domain Name System，缩写：DNS）是互联网的一项服务。它作为将域名和IP地址相互映射的一个分布式数据库，能够使人更方便地访问互联网。

DNS是一个组织的系统管理机构, 维护系统内的每个主机的IP和主机名的对应关系。

如果新计算机接入网络，将这个信息注册到数据库中，当用户输入域名的时候，会自动查询DNS服务器。然后由DNS服务器检索数据库，得到对应的IP地址。

但是在域名解析的过程中仍然会优先查找hosts文件的内容

#### 我的演示
我们来到阿里云的控制台，进入域名模块。

![image-20220521130501517](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521130501517.png)

点击左栏的域名列表，之后点击**解析**
![image-20220521130525296](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521130525296.png)

然后点击新手引导，在此界面的记录值框框里输入自己服务器的公网IP地址，之后点击确定。
![image-20220521130548587](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521130548587.png)

可以看到自己服务器的公网IP地址已经正常的被域名解析。
![image-20220521130554143](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521130554143.png)

并且这里显示了我的域名-IP解析记录分配到了图中这个服务器上：
![image-20220521130602125](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521130602125.png)


## 第八步 在服务器部署网站需要的组件
### 手动部署

我们可以SSH连接服务器，通过命令行安装并且配置教程开头提到的**LNMP**或者**LAMP**

之后在本地电脑编写HTML静态网页、或者使用PHP。

网站还可以不去使用PHP，而是JAVA、.NET、CSS等等。

编写好的网页上传到服务器并进行配置，从而实现了网页的架设。

这种部署方式更适合自定义需求大的用户，并且有着强大的开发能力的团队。

### 借助第三方工具一键部署
我们可以通过一些第三方的软件安装在服务器，这类软件会提供一个可视化操作界面，在界面里可以搜索并安装相关组件，并且对服务器和网站的情况进行监视。（有点类似于管家一样，可以监控网站，还可以像软件商店一样一键安装程序）

这类软件比较有名的是：**宝塔面板**

### 我的演示

由于我是做个人博客，所以在此我也使用第三方软件 **宝塔面板** 对网站组件进行安装布置。

**按照以下步骤操作：**

#### （1） 在服务器里安装宝塔面板
在宝塔官网 ``https://www.bt.cn/new/download.html``我们可以查询到各个系统版本的安装命令 

由于我的服务器是Linux的Centos7.9版本，因此我的安装命令为：

```
yum install -y wget && wget -O install.sh http://download.bt.cn/install/install_6.0.sh && sh install.sh ed8484bec
```

使用SSH工具连接服务器，之后输入以上安装命令:
![image-20220521130614968](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521130614968.png)

期间遇到（y/n）就输入 y ，然后点击Enter

大概需要三分钟安装完成，最终执行结果里有宝塔面板的登录入口以及初始用户名和密码：

![image-20220521130622014](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521130622014.png)

#### （2）登录宝塔面板
复制上一步中我们的宝塔外网面板地址到浏览器地址栏并搜索
之后输入我们的用户名和密码进行登录
登录之后进入面板，可以用手机号注册账户并绑定此面板

![image-20220521130628374](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521130628374.png)

进入之后首页会出现以下窗口：

![image-20220521130633957](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521130633957.png)

#### （3）安装网站组件

根据上一步中宝塔面板弹出的窗口，我们推荐安装第一个**LNMP**，但是**我建议把PHP的版本调整为7.4**（因为版本8不够稳定，版本7以下的可能无法正常显示一些网页效果）

之后点击一键安装会进入安装界面，等待安装完成（用时大概五分钟）

#### （4）一键部署网站

如图，我们进入了宝塔面板主页

来到软件商店

找到一键部署，我选择了第二个WordPress，因为这个更适合搭建我的个人博客。

![image-20220521231507887](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521231507887.png)

**关于WordPress的介绍**
WordPress是使用PHP语言开发的博客平台，用户可以在支持PHP和MySQL数据库的服务器上架设属于自己的网站。也可以把 WordPress当作一个内容管理系统（CMS）来使用。

WordPress是一款个人博客系统，并逐步演化成一款内容管理系统软件，它是使用PHP语言和MySQL数据库开发的，用户可以在支持 PHP 和 MySQL数据库的服务器上使用自己的博客。

简单地讲就是，由于网站的每个网页都是html页面所呈现的。而WordPress提供了许多网站模板，可以直接套用，避免我们从代码层编写界面花费时间精力。这就像是做一个PPT直接找了一个PPT的模板一样。

点击一键部署，出现以下界面：
我们填写好自己申请的域名，自定义一个MySQL数据库的密码。同时截屏记录相关信息，之后点击提交。
![image-20220521130657398](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521130657398.png)

之后会出现以下界面：
![image-20220521130702753](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521130702753.png)

**注意：** 此界面很重要，要截图保存。

至此网站已经基本建设完成，这里展示了你的数据库信息。


## 第九步 编辑网站页面和内容
**点击第九步图中绿色的网址来访问我们刚刚建立的站点。**

**注意:** 
此时有可能无法加载到此站点，因为我的这个域名之前解析的另外一台服务器，被浏览器所记忆了。此时需要删除浏览器缓存或者更换另一个浏览器。
在此我更换使用了FireFox来完成接下来的操作.

选择简体中文，点击继续。

![image-20220521231544186](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521231544186.png)

输入刚刚截图的MySQL的数据库名字、用户名、密码。后两项默认。
![image-20220521231600043](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521231600043.png)

点击提交，然后点击现在安装。
![image-20220521231618517](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521231618517.png)

之后注册自己网站的相关信息，然后点击 安装WprdPress
![image-20220521231724417](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521231724417.png)

接着点击登录
![image-20220521130805964](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521130805964.png)

然后输入自己注册的用户名、密码，登录WordPress界面。
![image-20220521231803236](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521231803236.png)

然后我们来到了WordPress的管理员页面，左栏是工具栏，我们可以在这里自定义自己网站的外观，内容……
![image-20220521130818537](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521130818537.png)

在工具栏主题编辑器这里可以从代码层编辑我们的网站页面。
![image-20220521130829484](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521130829484.png)

这是我编辑好的网站主页面

![屏幕截图 2022-04-01 070301](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202022-04-01%20070301.png)

## 第十步 安装SSL证书
#### 什么是SSL证书？

SSL证书（SSL Certificates）为网站和移动应用（APP）及小程序提供数据HTTPS加密协议访问，保障数据的安全。装载SSL证书产品后自动激活浏览器中显示“锁”型安全标志，地址栏以“https”开头。

我使用了一款免费的SSL证书，因此我的网站网址是: https://jiashuaibei.xyz
![image-20220521234422357](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521234422357.png))


## 第十一步 网站的运行和维护

### （1）监控服务器状况
我们可以在服务器和阿里云控制台中查看网站的运行进程、服务器的状况……
![image-20220521130926756](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521130926756.png)

![image-20220521234335322](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521234335322.png)

### （2）我们要做好安全防护

我们可以购买云厂商提供的各种安全防护服务，比如DDOS攻击防护、网站SSL证书……
![image-20220521175245267](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521175245267.png)

### （3）网站数据的备份
服务器有随时宕机、被黑客攻击的可能，因此我们要经常对网站的数据进行备份。

### （4）网站日常更新
就像是公众号一样，我们要对网站的内容以及架构及时进行更新，从而保证网站的质量。
**前端工程师** 要做好网站的界面设计，与人的交互……
**后端工程师** 要做好数据库以及网站结构的优化……

### （5）内容审核
管理员要对网站的内容或者用户上传的内容进行审核，避免出现不良的信息或者是病毒木马……
可以接入机器学习、AI识别等相关服务来甄别内容，保证网站环境的安全。
![image-20220521175221616](https://picwh-1310027666.cos.ap-shanghai.myqcloud.com/img/image-20220521175221616.png)

### 最后

**此教程是我根据个人知识储配以及网上查取资料所写的，如存在不足或者错误之处请理解。**

**原创不易，希望点赞关注!**

